---
title: Власні ефекти зачарування
description: Взнайте як створити власні зачарування ефектів.
authors:
  - CelDaemon
  - krizh-p
---

Починаючи з версії 1.21, спеціальні зачарування в Minecraft використовують підхід, керований даними. Це полегшує додавання простих зачарувань, як-от збільшення шкоди від атаки, але ускладнює створення складних. Процес передбачає розбиття чар на _компоненти ефекту_.

Компонент ефекту містить код, який визначає спеціальні ефекти зачарування. Minecraft підтримує різні стандартні ефекти, такі як пошкодження предметів, відкидання та досвід.

::: tip

Обов’язково перевірте, чи стандартні ефекти Minecraft задовольняють ваші потреби, відвідавши [сторінку компонентів ефектів зачарування Вікі Minecraft](https://minecraft.wiki/w/Enchantment_definition#Effect_components). У цьому посібнику передбачається, що ви розумієте, як налаштувати «прості» зачарування, керовані даними, і зосереджено на створенні спеціальних ефектів зачарування, які не підтримуються усталено.

:::

## Власні ефекти зачарування {#custom-enchantment-effects}

Почніть зі створення теки `enchantment`, а в ній створіть теку `effect`. У цьому випадку ми створимо запис `LightningEnchantmentEffect`.

Далі ми можемо створити конструктор і перевизначити методи інтерфейсу `EnchantmentEntityEffect`. Ми також створимо змінну `CODEC` для кодування та декодування нашого ефекту; ви можете прочитати більше про [кодеки тут](../codecs).

Основна частина нашого коду буде передана в подію `apply()`, яка викликається, коли виконується критерій для роботи вашого зачарування. Пізніше ми налаштуємо цей `Effect`, щоб він викликався, коли сутність уражена, а поки що напишімо простий код, щоб вразити ціль блискавкою.

@[code transcludeWith=#entrypoint](@/reference/latest/src/main/java/com/example/docs/enchantment/effect/LightningEnchantmentEffect.java)

Тут змінна `amount` вказує на значення, масштабоване до рівня зачарування. Ми можемо використовувати це, щоб змінити ефективність зачарування залежно від рівня. У коді вище ми використовуємо рівень зачарування, щоб визначити, скільки ударів блискавки породжується.

## Реєстрація ефекту зачарування {#registering-the-enchantment-effect}

Як і будь-який інший компонент вашого мода, нам доведеться додати цей `EnchantmentEffect` до реєстру Minecraft. Для цього додайте клас `ModEnchantmentEffects` (або будь-яку іншу назву) і допоміжний метод для реєстрації зачарування. Обов’язково викликайте `registerModEnchantmentEffects()` у вашому головному класі, який містить метод `onInitialize()`.

@[code transcludeWith=#entrypoint](@/reference/latest/src/main/java/com/example/docs/enchantment/ModEnchantmentEffects.java)

## Створення зачарування {#creating-the-enchantment}

Тепер у нас є ефект зачарування! Останнім кроком є ​​створення зачарування, яке застосовує наш спеціальний ефект. Хоча це можна зробити, створивши файл JSON, подібний до файлів у пакетах даних, цей посібник покаже вам, як динамічно генерувати JSON за допомогою інструментів генерації даних Fabric. Для початку створіть клас `ExampleModEnchantmentGenerator`.

У цьому класі ми спочатку зареєструємо нове зачарування, а потім використаємо метод configure() для програмного створення JSON.

@[code transcludeWith=#entrypoint](@/reference/latest/src/client/java/com/example/docs/datagen/ExampleModEnchantmentGenerator.java)

Перш ніж продовжити, ви повинні переконатися, що ваш проєкт налаштовано для створення даних; якщо ви не впевнені, [перегляньте відповідну сторінку документів](../data-generation/setup).

Нарешті, ми повинні сказати нашому моду додати наш `EnchantmentGenerator` до списку завдань генерації даних. Для цього просто додайте `EnchantmentGenerator` до цього всередині методу `onInitializeDataGenerator`.

@[code transcludeWith=:::custom-enchantments:register-generator](@/reference/latest/src/client/java/com/example/docs/datagen/ExampleModDataGenerator.java)

Тепер, коли ви запускаєте завдання генерації даних вашого мода, у теці `generated` будуть створені JSON-файли зачарувань. Приклад можна побачити нижче:

@[code](@/reference/latest/src/main/generated/data/example-mod/enchantment/thundering.json)

Ви також повинні додати переклади до свого файлу `en_us.json` (для української створіть `uk_ua.json`), щоб надати своєму зачаруванню читабельну назву:

```json
"enchantment.example-mod.thundering": "Thundering",
```

Тепер у вас повинен бути робочий спеціальний ефект зачарування! Перевірте це, зачарувавши зброю за допомогою чар і вдаривши моба. Приклад наведено в наступному відео:

<VideoPlayer src="/assets/develop/enchantment-effects/thunder.webm">Використання зачарування грому</VideoPlayer>
